---
title: NPC Смещения
---

## Оглавление

- [Оглавление](#оглавление)
  - [Информация](#информация)
    - [Появление](#появление)
    - [Патрульные пути](#патрульные-пути)
    - [Торговые пути](#торговые-пути)
    - [Поведение](#поведение)

### Информация

- Все смещения указаны для файлов из официального патча 1.1.
- Числа указаны в шестнадцатеричном формате или с суффиксом, указывающим на их тип:

| Суффикс | Тип     | Размер               |
| ------- | ------- | -------------------- |
| f       | float   | 4 bytes              |
| d       | double  | 8 bytes              |
| i       | integer | 4 bytes              |
| b       | byte    | 1 byte (-128 to 127) |

Значение типа `«0F 85 -> 90 E9»` означает замену исходных байтов слева новыми байтами справа. (Байты указаны в порядке расположения файлов, они не представляют собой число, как смещение.)

#### Появление

| Значение по умолчанию | Файл        | Смещение | Автор | Описание                                                                                                                                                                                                                                                                    |
| --------------------- | ----------- | -------- | ----- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 100d                  | content.dll | 11BC78   | fox   | Начальное минимальное расстояние появления NPC в SP и MP (например, после респауна).                                                                                                                                                                                        |
| 1775d                 | content.dll | 11BC80   | Dev   | Начальное максимальное расстояние появления NPC в SP и MP (например, после респауна).                                                                                                                                                                                       |
| 2500d                 | content.dll | 11BC68   | Dev   | Максимальное расстояние появления NPC в SP и MP.                                                                                                                                                                                                                            |
| 2500f                 | content.dll | 0D3C36   | fox   | Максимальная дистанция, на которой NPC будут присутствовать в SP.                                                                                                                                                                                                           |
| 2500f                 | content.dll | 0D3D6E   | Dev   | Максимальная дистанция, на которой NPC будут присутствовать в MP.                                                                                                                                                                                                           |
| 3750f                 | content.dll | 058F46   | Dev   | Расстояние, на котором генерация NPC будет игнорировать ограничение плотности в SP.                                                                                                                                                                                         |
| 7500f                 | content.dll | 117A68   | Dev   | Расстояние, на котором генерация NPC будет игнорировать ограничение плотности в MP (другими словами, игроки, находящиеся на этом расстоянии от другого игрока, будут «разделять спавны», и нужно отойти на это расстояние, чтобы FLServer начал спавнить NPC для него/неё). |
| 3.0f                  | content.dll | 0BA57A   | adoxa | Интервал «сердцебиения» SpacePop в секундах. Т.е. как часто игра проверяет возможность появления встреч на основе времени репопа и плотности.                                                                                                                               |

#### Патрульные пути

| Значение по умолчанию | Файл        | Смещение | Автор | Описание                                                                                                                                                                                                                                                                                                                            |
| --------------------- | ----------- | -------- | ----- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 200f                  | content.dll | 118578   | Vital | Множитель для дистанций появления NPC на patrol_path; удвоив это значение, вы удвоите радиус появления на патрульных маршрутах; используйте вместе с нижеуказанными значениями для увеличения радиусов появления на patrol_path.                                                                                                    |
| 2500f                 | content.dll | 0C4974   | fox   | Минимальная дистанция появления NPC на patrol_path; появления ниже этой дистанции будут отклонены; используйте вместе с вышеуказанным значением для увеличения радиусов появления на patrol_path.                                                                                                                                   |
| 2000f                 | content.dll | 0BB1DA   | Vital | Расстояние от зоны (или от края patrol_path), с которого начинают появляться встречи — это не от центра патруля; если у вашего патруля радиус 750, встречи будут появляться в 2750 единиц от центральной оси патруля; если ваша зона — сфера с радиусом 4000, встречи начнут появляться в 6000 (4000 + 2000) единиц от центра зоны. |
| 2500f                 | content.dll | 0C48D7   | Vital | Расстояние, на котором NPC на patrol_path появляются, когда игроки находятся близко друг к другу на маршруте патруля.                                                                                                                                                                                                               |

#### Торговые пути

| Значение по умолчанию | Файл        | Смещение | Автор | Описание                                                                                                                                                                                                                                                                            |
| --------------------- | ----------- | -------- | ----- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1400i                 | content.dll | 0D8AAF   | Vital | Расстояние от нарушенной торговой линии, на котором создаются tradelaneattackers (нападающие на торговые линии).                                                                                                                                                                    |
| 2000f                 | content.dll | 0BB1DA   | Vital | Расстояние от последнего кольца торговой линии, от которого FL будет создавать NPC, когда вы входите в торговую линию.                                                                                                                                                              |
| 4000f                 | content.dll | 0D3D93   | Vital | Расстояние от последнего кольца торговой линии, на котором NPC патрульных маршрутов, созданные при входе в торговую линию, всё ещё будут существовать.                                                                                                                              |
| 1200f                 | content.dll | 11BB58   | Vital | Расстояние от последнего кольца торговой линии, на котором создаются NPC патрульных маршрутов (при 2750 и более NPC не создаются, если только не увеличено расстояние spawn для patrol_path).                                                                                       |
| 3750f                 | content.dll | 0C5D53   | Vital | Расстояние от кольца торговой линии (кроме ближайшего), на котором создаются NPC с `arrival = tradelane encounters` (допускаются отрицательные значения, хотя крайние кольца могут работать некорректно). В content.dll есть и другие значения 3750f, которые могут быть актуальны. |
| 5000i                 | content.dll | 0C2946   | Vital | Минимальное расстояние появления NPC торговой линии; появления ниже этого расстояния отклоняются и переносятся на следующее кольцо.                                                                                                                                                 |

#### Поведение

| Значение по умолчанию                                                                                                                                | Файл           | Смещение          | Автор               | Описание                                                                                                                                                                                                                                                                                                                                                                          |
| ---------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- | ----------------- | ------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 5000f                                                                                                                                                | common.dll     | 140810            | Dev                 | Максимальная дистанция, на которой NPC вступают в бой с врагами; не забудьте также увеличить дистанцию, на которой NPC будут вступать в бой в `pilots_population` (параметр `attack_preference` в `JobBlock`).                                                                                                                                                                    |
| 10000f                                                                                                                                               | server.dll     | 0A8AF0            | FriendlyFire        | Максимальная дистанция стрельбы ИИ.                                                                                                                                                                                                                                                                                                                                               |
| 2i                                                                                                                                                   | common.dll     | 18C754            | adoxa               | Первое значение `Act_PlayerEnemyClamp`, используется для определения количества враждебных NPC, которые будут атаковать игрока.                                                                                                                                                                                                                                                   |
| 2i                                                                                                                                                   | common.dll     | 18C758            | adoxa               | Второе значение `Act_PlayerEnemyClamp`, используется для определения количества враждебных NPC, которые будут атаковать игрока.                                                                                                                                                                                                                                                   |
| 7E 31 -> EB 39                                                                                                                                       | common.dll     | 08E86A            | adoxa               | Альтернатива вышеуказанному: полностью отключает `PlayerEnemyClamp`, делая выбор целей для NPC случайным.                                                                                                                                                                                                                                                                         |
| 74 -> EB                                                                                                                                             | common.dll     | 08E6D8            | adoxa               | Убирает проверку FIGHTER / FREIGHTER на игрока для `attack_preference` в `JobBlocks`.                                                                                                                                                                                                                                                                                             |
| 04 -> 00                                                                                                                                             | common.dll     | 13E52C            | adoxa               | NPC используют сканер (включает возможность запуска Countermeasures — CMs).                                                                                                                                                                                                                                                                                                       |
| 5000f                                                                                                                                                | content.dll    | 0D0630<br/>11BD10 | Dev                 | Максимальная дистанция, на которой NPC станут враждебными после того, как их союзники станут враждебными (нужно изменить оба смещения).                                                                                                                                                                                                                                           |
| 500i                                                                                                                                                 | content.dll    | 06C470            | Dev                 | Максимальная дистанция, на которой NPC будут сканировать ваш груз.                                                                                                                                                                                                                                                                                                                |
| 2500f                                                                                                                                                | content.dll    | 06C717            | Dev                 | Максимальная дистанция, на которой NPC начнут сканировать ваш груз.                                                                                                                                                                                                                                                                                                               |
| 500f                                                                                                                                                 | content.dll    | 0C4C01            | Gold_Sear<br/>M0tah | Минимальное расстояние от позиции игрока в момент спавна, на которое NPC патруль с `arrival = cruise` полетит при появлении.                                                                                                                                                                                                                                                      |
| 2000f                                                                                                                                                | content.dll    | 0C4C06            | Gold_Sear<br/>M0tah | Максимальное расстояние от позиции игрока в момент спавна, на которое NPC патруль с `arrival = cruise` полетит при появлении.                                                                                                                                                                                                                                                     |
| 25000000f                                                                                                                                            | content.dll    | 1195D4            | Vital               | Квадрат расстояния от конца `patrol_path` до объекта, с которым NPC патруля не будут стыковаться (проверялось только с прыжковыми воротами; увеличение этого значения может предотвратить падения PP).                                                                                                                                                                            |
| 200f                                                                                                                                                 | common.dll     | 07AE5E            | Vital               | Неизвестно. Увеличение до 1000f и выше заставляет NPC патруля стоять на месте после спавна. (Примечание fox: этот диапазон, похоже, также обозначает диапазон, в котором корабли, созданные с `MsnRandEnc` в сюжетных миссиях, прекращают крейсерский полет и атакуют цели; при спавне кораблей через `MsnRandEnc` увеличение этого значения делает их более эффективными в бою). |
| 0.0001f                                                                                                                                              | common.dll     | 13E518            | adoxa               | Чувствительность `nudge_force` (чем выше, тем меньше автоматического уклонения от автопилота и ИИ).                                                                                                                                                                                                                                                                               |
| 1.5f                                                                                                                                                 | common.dll     | 13E6D0            | fox                 | Значение помощника автопилота, используемое всеми функциями ИИ, включая маневрирование NPC и автопилот игрока; обычно устанавливается ниже для более точного и "придирчивого" автопилота (влияет на поведение ИИ, может сломать NPC, использовать осторожно).                                                                                                                     |
| 50f                                                                                                                                                  | common.dll     | 13E6D4            | fox                 | Значение смещения по умолчанию для NPC, следующих за игроком с `FollowOp`; NPC следует справа по умолчанию, но после перехода через системы может появляться слева, ниже или выше.                                                                                                                                                                                                |
| 54 72 61 69 6C 4F 70 40 41 49 40 70 75 62 40 40 51 41 45 40 58 5A 00<br/>-><br/>46 6F 6C 6C 6F 77 4F 70 40 41 49 40 70 75 62 40 40 51 41 45 40 58 5A | content.dll    | 129058            | fox                 | Заменяет поведение `TrailOp` на `FollowOp` (очень полезно для дополнения "wingmen addon" [ссылка](http://the-starport.net/freelancer/forum/viewtopic.php?topic_id=977)).                                                                                                                                                                                                          |
| 33 FF 89 7C 24 -> E9 23 F9 FF FF                                                                                                                     | content.dll    | 085D6F            | adoxa               | Альтернативный метод замены поведения `TrailOp` на `FollowOp` (Часть 1).                                                                                                                                                                                                                                                                                                          |
| 06 -> 07                                                                                                                                             | content.dll    | 06CDF5            | adoxa               | Замена поведения `TrailOp` на `FollowOp` (альтернативный метод, Часть 2).                                                                                                                                                                                                                                                                                                         |
| 14 -> 4C                                                                                                                                             | content.dll    | 06CE24            | adoxa               | Замена поведения `TrailOp` на `FollowOp` (альтернативный метод, Часть 3).                                                                                                                                                                                                                                                                                                         |
| 18 -> 50                                                                                                                                             | content.dll    | 0875BC            | adoxa               | Замена поведения `TrailOp` на `FollowOp` (альтернативный метод, Часть 4).                                                                                                                                                                                                                                                                                                         |
| 1C -> 54                                                                                                                                             | content.dll    | 0875C2            | adoxa               | Замена поведения `TrailOp` на `FollowOp` (альтернативный метод, Часть 5).                                                                                                                                                                                                                                                                                                         |
| 7A 19 -> 90 90                                                                                                                                       | common.dll     | 08C331            | Gold_Sear           | Сделать лидера формации независимым от эскорта (это позволит лидерам формации убегать) Часть 1.                                                                                                                                                                                                                                                                                   |
| DC 0D 88 DF 39 06 -> 90 90 90 90 90 90                                                                                                               | common.dll     | 08C35C            | Gold_Sear           | Сделать лидера формации независимым от эскорта (это позволит лидерам формации убегать) Часть 2.                                                                                                                                                                                                                                                                                   |
| 7A 23 -> 90 90                                                                                                                                       | common.dll     | 08C4D3            | Gold_Sear           | Сделать лидера формации независимым от эскорта (это позволит лидерам формации убегать) Часть 3.                                                                                                                                                                                                                                                                                   |
| 75 12 -> 90 90                                                                                                                                       | common.dll     | 08C4E4            | Gold_Sear           | Сделать лидера формации независимым от эскорта (это позволит лидерам формации убегать) Часть 4.                                                                                                                                                                                                                                                                                   |
| 500f                                                                                                                                                 | common.dll     | 06C017            | Gold_Sear<br/>M0tah | Расстояние впереди лидера формации, на которое эскорт "предугадывает", чтобы догнать лидера при крейсерском полете (уменьшение значения заставит эскорт двигаться по более прямой линии к лидеру, но слишком низкое значение заставляет их раскачиваться после небольшого поворота).                                                                                              |
| 500f                                                                                                                                                 | common.dll     | 075B36            | Gold_Sear           | Расстояние от лидера формации, на которое эскорт будет крейсировать (до выхода из крейсерского режима), а также дальность "догоняющего" крейсерского следа.                                                                                                                                                                                                                       |
| 200f                                                                                                                                                 | common.dll     | 06C00D            | M0tah               | Увеличение этого значения позволяет крупным формированиям состыковываться с прыжковыми воротами (использовать с осторожностью).                                                                                                                                                                                                                                                   |
| 07 -> 00                                                                                                                                             | common.dll     | 08ADD7            | adoxa               | Отключить задержку при стрельбе NPC.                                                                                                                                                                                                                                                                                                                                              |
| 83 EC 34 53 56 -> B0 01 C2 04 00                                                                                                                     | common.dll     | 038590            | adoxa               | Настройка `CEGun::CanSeeTargetObject`, позволяющая NPC "видеть" всё. Сильно влияет на поведение стрельбы.                                                                                                                                                                                                                                                                         |
| 0.0523599f                                                                                                                                           | common.dll     | 08A185<br/>08AE95 | adoxa               | Угол конуса дульного огня NPC в радианах (нужно изменить оба смещения).                                                                                                                                                                                                                                                                                                           |
| 03 -> 7F                                                                                                                                             | common.dll     | 66148             | Aingar              | Заставляет NPC использовать правильное поведение при преследовании для типов кораблей, которые не являются `FIGHTER` или `FREIGHTER`.                                                                                                                                                                                                                                             |
| 84 C0 -> 90 90                                                                                                                                       | common.dll     | 763B6             | Venemon             | Члены формации будут использовать свои двигатели (thrusters).                                                                                                                                                                                                                                                                                                                     |
| 33 F6 -> B3 04                                                                                                                                       | freelancer.exe | CF4E6             | Venemon             | Переключение списка контактов перед запуском (00 важно, 01 корабли, 02 солярные объекты, 03 добыча, 04 все).                                                                                                                                                                                                                                                                      |
| 89 B5 -> 89 9D                                                                                                                                       | freelancer.exe | CF500             | Venemon             | Переключение списка контактов, часть 2.                                                                                                                                                                                                                                                                                                                                           |
| 89 B5 -> 89 8D                                                                                                                                       | freelancer.exe | CF4EF             | Venemon             | Переключение списка контактов, часть 3.                                                                                                                                                                                                                                                                                                                                           |
| 89 B5 -> 89 8D                                                                                                                                       | freelancer.exe | CF517             | Venemon             | Переключение списка контактов, часть 4.                                                                                                                                                                                                                                                                                                                                           |
| 3000f                                                                                                                                                | freelancer.exe | 1D95A8            | Venemon             | Дистанция, на которой будут отображаться имена игроков.                                                                                                                                                                                                                                                                                                                           |
